import streamlit as st
import random
from datetime import date

st.set_page_config(
    page_title="ì‘ê°€ë‹˜ì˜ ë„íŒŒë¯¼ ë½‘ê¸°",
    page_icon="ğŸŒ€",
    layout="wide"
)

# --- ë°ì´í„° ì •ë¦¬ ---
tasks_writing = [
    ("50ì ì“°ê¸°", 0.25, "ì¼ë°˜"),
    ("100ì ì“°ê¸°", 0.20, "ì¼ë°˜"),
    ("150ì ì“°ê¸°", 0.15, "ê³ ê¸‰"),
    ("200ì ì“°ê¸°", 0.12, "ê³ ê¸‰"),
    ("250ì ì“°ê¸°", 0.08, "í¬ê·€"),
    ("300ì ì“°ê¸°", 0.06, "í¬ê·€"),
    ("10ë¶„ íœ´ì‹", 0.09, "í¬ê·€"),
    ("30ë¶„ íœ´ì‹", 0.04, "ì˜ì›…"),
    ("500ì ì“°ê¸°", 0.01, "ì „ì„¤")
]

tasks_cleaning = [
    ("ì±…ìƒ ì •ë¦¬", 0.25, "ì¼ë°˜"),
    ("ì²­ì†Œê¸° ëŒë¦¬ê¸°", 0.20, "ì¼ë°˜"),
    ("ììœ ", 0.15, "ê³ ê¸‰"),
    ("ë¹¨ë˜ ê°œê¸°", 0.12, "ê³ ê¸‰"),
    ("ìš•ì‹¤ ì²­ì†Œ", 0.08, "í¬ê·€"),
    ("ì“°ë ˆê¸° ë²„ë¦¬ê¸°", 0.06, "í¬ê·€"),
    ("ì„¸íƒê¸° ëŒë¦¬ê¸°", 0.09, "í¬ê·€"),
    ("ì¬í™œìš© ì •ë¦¬", 0.04, "ì˜ì›…"),
    ("ë¬¼ê±¸ë ˆì§ˆ", 0.01, "ì „ì„¤")
]

reactions = {
    "50ì ì“°ê¸°": "ì§§ê³  êµµê²Œ, ë°”ë¡œ ì¨ë³´ì!",
    "100ì ì“°ê¸°": "ì¢‹ì•„, ì† ì¢€ í’€ë¦¬ê² ëŠ”ë°?",
    "150ì ì“°ê¸°": "ì§‘ì¤‘ë ¥ ëª¨ë“œ ìŠ¬ìŠ¬ ì‹œë™ ê±¸ì.",
    "200ì ì“°ê¸°": "ì§€ê¸ˆë¶€í„°ëŠ” ëª°ì… êµ¬ê°„ì´ì•¼.",
    "250ì ì“°ê¸°": "ì´ ì •ë„ë©´ ë„íŒŒë¯¼ íë¥¸ë‹¤.",
    "300ì ì“°ê¸°": "ì‘ê°€ë‹˜ í­ì£¼ ì‹œì‘í•˜ë‚˜ìš”?",
    "500ì ì“°ê¸°": "ì „ì„¤ ë“±ì¥! ì§„ì‹¬ ìŸì„ ì°¨ë¡€.",
    "10ë¶„ íœ´ì‹": "ì‚´ì§ ìˆ¨ ëŒë¦¬ê³  ì™€!",
    "30ë¶„ íœ´ì‹": "ì§„ì§œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ë§ˆ. ì´ê²ƒë„ ì¼ì„.",
    "ì±…ìƒ ì •ë¦¬": "ì •ì‹ ë„ ê°™ì´ ì •ëˆë˜ëŠ” ê¸°ë¶„ì´ì•¼.",
    "ì²­ì†Œê¸° ëŒë¦¬ê¸°": "ë”± 10ë¶„ë§Œ ì§‘ì¤‘í•´ì„œ ë°€ì.",
    "ììœ ": "ì„ íƒì€ ììœ ì§€ë§Œ, ì±…ì„ì€ ë„ˆì—ê²Œ ìˆì–´.",
    "ë¹¨ë˜ ê°œê¸°": "ê²¹ê²¹ì´ ì •ë¦¬ëœ ì˜·ì²˜ëŸ¼, ì˜¤ëŠ˜ë„ ê²¹ê²¹ì´ ì‚´ì.",
    "ìš•ì‹¤ ì²­ì†Œ": "ìŠµê¸°ì™€ì˜ ì „ìŸ. í•˜ì§€ë§Œ ëë‚˜ë©´ ê°œìš´í•˜ì§€.",
    "ì“°ë ˆê¸° ë²„ë¦¬ê¸°": "ë²„ë¦´ìˆ˜ë¡ ë‚¨ëŠ” ê²Œ ìˆì–´. ê°ì •ë„, ì“°ë ˆê¸°ë„.",
    "ì„¸íƒê¸° ëŒë¦¬ê¸°": "ê¸°ê³„ê°€ ëŒê³  ìˆëŠ” ë™ì•ˆ, ë„ˆëŠ” ì¢€ ì‰¬ì.",
    "ì¬í™œìš© ì •ë¦¬": "ì˜ë¯¸ë¥¼ ë˜ì‚´ë¦¬ëŠ” ê±´, ì“°ë ˆê¸°ë„ ì¸ê°„ë„ ë˜‘ê°™ì•„.",
    "ë¬¼ê±¸ë ˆì§ˆ": "ì´ê±´ ì§„ì§œ ê²°ì‹¬ì´ í•„ìš”í•´. ê°ì •ì„ ë„ ê¹”ë”í•˜ê²Œ."
}

badge_colors = {
    "ì¼ë°˜": "#808080",
    "ê³ ê¸‰": "#2e8b57",
    "í¬ê·€": "#4682b4",
    "ì˜ì›…": "#8a2be2",
    "ì „ì„¤": "#b22222"
}

emojis = ["ğŸŒ±", "ğŸŒŸ", "ğŸ€", "ğŸŒ€", "ğŸ’«", "ğŸˆ", "ğŸ§¸", "ğŸ“š", "â˜•"]

# --- ìœ í‹¸ í•¨ìˆ˜ ---
def render_badge(label, color):
    return f"""
    <span style="
        background-color:{color};
        color:white;
        padding:4px 10px;
        border-radius:10px;
        font-weight:bold;
        font-size:0.8rem;
        margin-left:8px;
    ">{label}</span>
    """

def pick_task(task_list):
    items, weights, _ = zip(*task_list)
    return random.choices(task_list, weights=weights, k=1)[0]

# --- í˜ì´ì§€ êµ¬ì„± ---
today = date.today().strftime("%Y-%m-%d")
st.title(f"ğŸŒ€ {today}ì˜ ê°ì •ì„  ë£¨í‹´")
st.write("ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì˜¤ëŠ˜ì˜ ìš´ëª… ê°™ì€ ì‘ì—…ì´ ê°ê° ë“±ì¥í•©ë‹ˆë‹¤.")

col1, col2 = st.columns(2)

# --- ì™¼ìª½: ê¸€ì“°ê¸° ---
with col1:
    st.subheader("âœï¸ ê¸€ì“°ê¸° ë½‘ê¸°")
    if st.button("ê¸€ì“°ê¸° ì‘ì—… ë½‘ê¸°"):
        task, _, rarity = pick_task(tasks_writing)
        emoji = random.choice(emojis)
        st.success(f"{emoji} {task}")
        st.markdown(render_badge(rarity, badge_colors[rarity]), unsafe_allow_html=True)
        st.caption(reactions.get(task, "ì˜¤ëŠ˜ë„ í˜ë‚´ì!"))

# --- ì˜¤ë¥¸ìª½: ì§‘ì•ˆì¼ ---
with col2:
    st.subheader("ğŸ§¹ ì§‘ì•ˆì¼ ë½‘ê¸°")
    if st.button("ì§‘ì•ˆì¼ ì‘ì—… ë½‘ê¸°"):
        task, _, rarity = pick_task(tasks_cleaning)
        emoji = random.choice(emojis)
        st.success(f"{emoji} {task}")
        st.markdown(render_badge(rarity, badge_colors[rarity]), unsafe_allow_html=True)
        st.caption(reactions.get(task, "ì˜¤ëŠ˜ë„ ê³ ìƒí–ˆì–´!"))

# --- í•˜ë‹¨ ë¬¸êµ¬ ---
st.write("---")
st.write("ì˜¤ëŠ˜ í•˜ë£¨ë„ ì²œì²œíˆ, ë‹¨ë‹¨í•˜ê²Œ.")
st.caption("ğŸ¤– ì´ ì•±ì€ GPT ê¸°ë°˜ ë³´ì¡°ì 'ë¨¼ë°ì´(Monday)'ì™€ í•¨ê»˜ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.")

